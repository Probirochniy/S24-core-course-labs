# ConfigMaps

## Upgrade Application for Persistence

I have upgraded both Python and Javascript apps to store the visits inside `visits/visits` file.
Also, I modified metrics/docker-compose.yaml file to include the volumes for `visits` folder for both containers.

## ConfigMap Implementation

 - `kubectl get po`

```bash
NAME                                   READY   STATUS    RESTARTS      AGE
helm-app-javascript-5f69b9c5f4-vstd8   1/1     Running   0             50s
helm-app-python-85755f8554-jqgft       2/2     Running   0             19m
nginx-statefulset-0                    1/1     Running   0             19m
vault-0                                1/1     Running   1 (94m ago)   8d
vault-agent-injector-dbfc5cd77-s65nw   1/1     Running   1 (94m ago)   8d
```

 - `kubectl exec helm-app-python-85755f8554-jqgft -- cat /app/config.json`

```bash
Defaulted container "helm-app-python" out of: helm-app-python, vault-agent, vault-agent-init (init)
{
    "example": "example data"
}
```

 - `kubectl exec helm-app-javascript-5f69b9c5f4-vstd8 -- cat /app/config.json`

```bash
kubectl exec helm-app-javascript-5f69b9c5f4-vstd8 -- cat /app/config.json
{
    "example": "example data"
}
```

## ConfigMap via Environment Variables

 - `kubectl exec helm-app-python-54c9dbf7b9-zsg87 -- env`

```bash
...

user=user
config.json={
    "example": "example data"
}
MY_PASSWORD=secret1234

...
```

 - `kubectl exec helm-app-javascript-6f954bcbc7-bc8cv -- env`

```bash
...

HOSTNAME=helm-app-javascript-6f954bcbc7-bc8cv
config.json={
    "example": "example data"
}
user=user

...
```
